{% extends "base.html" %}
{% load post_tags %}
{% load static %}

{% block links %}
    <link rel="stylesheet" href="{% static 'css/home_tt/profile_pic.css' %}">
    <link rel="stylesheet" href="{% static 'css/home_tt/post.css' %}">
    <!-- <link rel="stylesheet" href="{% static 'css/home/home_styles.css' %}"> -->
    <link rel="stylesheet" href="{% static 'css/my_publications/my_publications.css' %}">
    <link rel="stylesheet" href="{% static 'css/home_tt/profile.css' %}">
    <script defer src = "{% static 'js/home_tt/tags.js' %}"></script>
    <script defer src = "{% static 'js/my_publications/creation_form.js' %}"></script>
    <script defer src = "{% static 'js/my_publications/post_details.js' %}"></script>
{% endblock %}

{% block content %}
       {% if request.user.is_authenticated %}
        {% render_profile_short account 1 %}
    {% endif %}
    <!-- <div class="all-info"> -->
    <div class = "posts" id = "0">
        <input type="hidden" name = "deleteURL" value = "{% url 'delete_link' %}">
        <!-- post details (click on triple dot icon on the post) -->
        <div class = "hidden post-detail-box">
            <div class = "post-detail-imgbox">
                <img src="{% static 'img/home_tt/triple_dot.svg' %}" alt=":" class = "post-details-img">
            </div>
            <div class = "post-detail-edit" id = "editPost">
                <img src = "{% static 'img/my_publications/pencil.svg' %}" alt="" class = "post-details-desc-img">
                <p class = "post-detail-desc-text">Редагувати допис</p>
            </div>
            <hr class = "post-detail-breaker">
            <div class = "post-detail-edit" id = "deletePost">
                <img src = "{% static 'img/my_publications/black_trashbin.svg' %}" alt="" class = "post-details-desc-img">
                <p class = "post-detail-desc-text">Видалити публікацію</p>
            </div>
        </div>
        <!-- creation form: entrance (what) -->
        <div class="creation-publication-div">
            <form class = "create-post-form">
                <textarea name="publication-text" id="publication-text" placeholder="Текст публікації"></textarea>
                <div class="creation-buttons">
                    <button class="smile-button" type="button"><img src="{% static 'img/home_tt/smile.svg' %}" alt="smile"></button>
                    <button class="form-button" type = "button">Перейти до оформлення</button>
                </div>
            </form>    
        </div>
        <!-- posts -->
        {% for post in posts %}
            {% render_post post %}
        {% endfor %}
    </div>
    <canvas class = "hidden image-transfer"></canvas>
    <div class = "form-dimmer hidden">
        <form method = "post" class = "form-creation-post" enctype="multipart/form-data">
            {% csrf_token %}
            <img src = "{% static 'img/my_publications/close.svg' %}" alt = "X" class = "creation-form-close">
            <h1 class = "creation-form-title">Створення публікації</h1>
            <div class = "creation-form-inputs">
                {% for field in form %}
                    <!-- <p>{{ field.field.widget.attrs.class|default:"(no class)" }}</p> -->
                    {% if field.field.widget.attrs.class|default:"(no class)" != "hidden" %}
                        <div class = "creation-form-input">
                            {{ field.label_tag }}
                            {{ field }}
                            {{ field.errors }}
                            {% if field.field.widget.attrs.class|default:"whyamidoingthis" == "creation-input-area" %}
                                <div class = "creation-textarea-scrollbar">
                                    <div class = "creation-textarea-scrolltrack">
                                        <button class = "creation-textarea-scroll" type = "button"></button>
                                    </div>
                                </div>
                            {% endif %}
                        </div>
                    {% else %}
                        {{ field }}
                    {% endif %}
                {% endfor %}
                <div class = "creation-image-grid">
                    <!-- just a template for JS -->
                    <div class = "creation-image-box hidden" id = "originalImgTemplate">
                        <img src = "" class = "creation-image-preview">
                        <img src = "{% static 'img/my_publications/trashbin.svg' %}" class = "creation-image-delete">
                    </div>
                </div>
            </div>
            <div class = "creation-form-buttons">
                <input type="hidden" value = "{% static 'img/my_publications/trashbin.svg' %}" name = "trashbinSource">
                <button class="creation-smile-button creation-additional-button" type="button"><img src="{% static 'img/home_tt/smile.svg' %}" alt="smile"></button>
                <button class="creation-images-button creation-additional-button"  type="button"><img src="{% static 'img/my_publications/img.svg' %}" alt="img"></button>
                <input type="hidden" name = "sendImgURL" value = "{% static 'img/my_publications/send.svg' %}">
                <button class="creation-form-send" type = "submit">Публікація <img src = "{% static 'img/my_publications/send.svg' %}" alt=""></button>
            </div>
        </form>
    </div>
    <!-- </div> -->
{% endblock %}